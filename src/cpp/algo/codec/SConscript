# -*-python-*-
from openalea.sconsx.config import BisonFlex
import os
pj= os.path.join

Import( "env" )

# 1. Select the headers and sources

includes= env.ALEAGlob('*.h')
sources= env.ALEAGlob('*.cpp')

src= BisonFlex( env, "scne_parser.y", "scne_scanner.l", "scne_yy" )
for el in src:
    if isinstance(el,(list,tuple)):
        sources.extend(map(str,el))
    else:
        sources.append(str(el))

if env[ 'BISON_HPP' ]:
  includes.append( 'scne_parser.hpp' )
else:
  includes.append( 'scne_parser.cpp.h' )

# 2. Build and install the library/headers

inc= env.ALEAIncludes( "plantgl/algo/codec", includes )

sources= map(lambda x: pj( 'codec',x),sources)

Return('sources')

